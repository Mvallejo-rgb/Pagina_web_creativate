@model Parkease.Models.Entidades.Conductor

@{
    ViewData["Title"] = "Login";
}
@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        @TempData["SuccessMessage"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}
<!-- Contenedor principal -->
<div class="container vh-100 d-flex justify-content-center align-items-center">
    <div class="row shadow-lg rounded overflow-hidden" style="max-width: 900px; width: 100%;">

        <!-- Sección de la imagen (lado derecho) -->
        <div class="col-md-6 d-none d-md-block p-0">
            <div class="h-100 w-100" style="background: url('https://img.freepik.com/free-photo/young-person-using-sustainable-mobility_23-2149290908.jpg?t=st=1743009128~exp=1743012728~hmac=0231449df6278c6c34f8b567d3f8743a20a511de5c17a653f0ed81464fe6125c&w=1380') no-repeat center center; background-size: cover;">
            </div>
        </div>
            <div class="col-md-6 bg-white p-4">
                <div class="text-center mb-3">
                    <div class="con2">
                        <div class="cuadro-mapa">
                            <h2>¡Bienvenido!</h2>
                            <br>
                            <p class="text-muted">Inicia sesión en tu cuenta</p>
                        </div>
                    </div>

            <!-- Formulario de Login -->
            <form asp-controller="Auth" asp-action="Login" method="post" class="needs-validation" novalidate>

                <!-- Campo Correo -->
                <div class="mb-3">
                        <label for="correo" class="form-label fw-semibold text-start d-block">Correo*</label>
                    <div class="input-group">
                        <span class="input-group-text bg-light text-dark"><i class="fas fa-envelope"></i></span>
                        <input name="correo" type="email" class="form-control" placeholder="correo@ejemplo.com" required>
                        <div class="invalid-feedback">Por favor, ingrese un correo válido.</div>
                    </div>
                </div>

                <!-- Campo Contraseña -->
                <div class="mb-3">
                        <label for="contrasena" class="form-label fw-semibold text-start d-block">Contraseña*</label>
                    <div class="input-group">
                        <input name="contrasena" type="password" class="form-control" id="contrasena" placeholder="••••••" required>
                        <span class="input-group-text bg-light text-dark" id="togglePassword" style="cursor: pointer;">
                            <i class="fas fa-eye" id="eyeIcon"></i>
                        </span>
                        <div class="invalid-feedback">Ingrese su contraseña.</div>
                    </div>
                </div>

                <!-- Olvidaste tu contraseña -->
                <div class="text-end mb-3">
                    <a href="#" class="text-decoration-none text-primary">¿Olvidaste tu contraseña?</a>
                </div>

                <!-- Botón de Ingreso -->
                <div class="d-grid">
                    <button type="submit" class="btn btn-primary fw-bold">Ingresar</button>
                </div>

                <!-- Separador -->
                <div class="text-center mt-3">
                    <span class="text-muted">¿No tienes cuenta? <a asp-controller="Auth" asp-action="Registro" class="text-decoration-none text-primary fw-semibold">Regístrate</a></span>
                </div>

                <!-- Ingreso con redes sociales -->
                <div class="text-center mt-4">
                    <label class="text-muted">O ingresa con</label>
                    <div class="d-flex justify-content-center gap-3 mt-2">
                        <a href="#" class="btn btn-outline-danger rounded-circle d-flex align-items-center justify-content-center"
                           style="width: 50px; height: 50px; font-size: 1.5rem;">
                            <i class="fab fa-google"></i>
                        </a>
                        <a href="#" class="btn btn-outline-primary rounded-circle d-flex align-items-center justify-content-center"
                           style="width: 50px; height: 50px; font-size: 1.5rem;">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                    </div>
                </div>
            </form>

            <!-- Mensajes de error de validación -->
            @if (!ViewData.ModelState.IsValid)
            {
                <div class="alert alert-danger mt-3">
                    @foreach (var error in ViewData.ModelState.Values.SelectMany(v => v.Errors))
                    {
                        <p>@error.ErrorMessage</p>
                    }
                </div>
            }
        </div>
    </div>
</div>

<!-- Importación de FontAwesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<script>
    // Mostrar y ocultar contraseña
    document.getElementById("togglePassword").addEventListener("click", function () {
        let password = document.getElementById("contrasena");
        let eyeIcon = document.getElementById("eyeIcon");

        if (password.type === "password") {
            password.type = "text";
            eyeIcon.classList.remove("fa-eye");
            eyeIcon.classList.add("fa-eye-slash");
        } else {
            password.type = "password";
            eyeIcon.classList.remove("fa-eye-slash");
            eyeIcon.classList.add("fa-eye");
        }
    });

    // Validación de Bootstrap en el formulario
    (function () {
        'use strict';
        let forms = document.querySelectorAll('.needs-validation');

        Array.prototype.slice.call(forms).forEach(function (form) {
            form.addEventListener('submit', function (event) {
                if (!form.checkValidity()) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                form.classList.add('was-validated');
            }, false);
        });
    })();
</script>